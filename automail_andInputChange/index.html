<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>无标题文档</title>
<script src="../_js/jquery.1.8.3.min.js"></script>
<style>
ul{list-style:none;padding:0;margin:0;}


.c1{position:relative;}
.c2{position:absolute;left:0;top:22px;border:1px solid #ccc;min-width:153px;width:auto;background:#fff;display:none;}
.c2 li{ cursor:pointer;line-height:1.5;padding:0 5px;}
.c2 li:hover{background:#999;color:#fff;}
</style>
</head>

<body>

<div class="c1">
    <input type="text" id="ss"/>
    <div class="c2"></div>
</div>

<script>

var mails=["qq.com","126.com","163.com","hotmail.com","yahoo.com","yahoo.com.cn","live.com","sohu.com","sina.com","chinavalue.net","chinaksp.net"];
$('#ss').focus(function(){
    $(this).bind('input propertychange',function(){
        var v=$(this).val().replace(/[ ]/g,"");
        if(!v||v.indexOf('@')>0) return;
        var ul='<ul>';
        $.each(mails,function(i,n){ ul+='<li>'+v+'@'+n+'</li>';});
        ul+='</ul>';
        $('.c2').html(ul).show().find('li').bind('mousedown',function(){
            $('#ss').val($(this).text());
            $('.c2').hide();
        });
    });
});
$(document).bind('click',function(e){
    if($(e.target).closest('.c2').length<=0){$('.c2').hide();}
});

 /*
  function immediately(){
      var element = document.getElementById("mytext");
      if("\v"=="v") element.onpropertychange = webChange;
      else element.addEventListener("input",webChange,false);
      function webChange(){
            if(element.value) document.getElementById("test").innerHTML = element.value;
      }
  }
 */
</script>

</body>
</html>